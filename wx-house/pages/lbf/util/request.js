"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.api=void 0;var _util=require("./util"),_index=require("../actions/index"),_sha=require("../assets/libs/sha1"),_sha2=_interopRequireDefault(_sha);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var getHeader=function(e,t){var r={"X-LBF-Module":"Client-LBF","Content-Type":Object.is(e,"post")?"application/x-www-form-urlencoded; charset=UTF-8":"application/json; charset=UTF-8","X-LBF-TimeStamp":(new Date).getTime()},a=wx.getStorageSync(_index.storageKeys.id).app_id,i=wx.getStorageSync(_index.storageKeys.live_mode),n=wx.getStorageSync(_index.storageKeys.version),o=wx.getStorageSync(_index.storageKeys.project_name);a=t.app_id||a;var s=Object.keys(t).sort().map(function(e){return e+"="+t[e]}).join("&")+"&"+a,u=new _sha2.default.SHA1;return Object.assign({},r,{"x-version":n,"x-project":""+o,"X-Livemode":""+i,"X-Signature-Key":a,"X-Signature":u.hex(s)})},get=function(e,t){return(0,_util.base)(wx.request)({url:e,header:getHeader("get",t),method:"GET",data:t})},post=function(e,t){return(0,_util.base)(wx.request)({url:e,header:getHeader("post",t),method:"POST",data:t})},api=exports.api={get:get,post:post};