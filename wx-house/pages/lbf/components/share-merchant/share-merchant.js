"use strict";var _index=require("../../actions/index"),_index2=require("../../util/index");Component({data:{isIPhoneX:!1,show:!1,showShare:!1,showPreview:!1,hideShare:!1,imageSize:{width:200,height:355},previewHeight:0},attached:function(){var a=this;(0,_index2.getSystemInfo)().then(function(e){var t=e.model,i=-1<t.indexOf("iPhone X")||-1<t.indexOf("unknown");a.setData({isIPhoneX:i})}).catch(function(e){return console.error(e)}),this.initImageSize()},methods:{initImageSize:function(){var n=this;wx.getSystemInfo({success:function(e){var t=e.windowHeight,i=t-120-20-110,a=200/355*i;n.setData({previewHeight:t-120+"px",imageSize:{width:a,height:i}})}})},updateShareStatus:function(e){if(e.target){var t=e.target.dataset.status;t=Object.is(t,"true"),this.setData({show:t,showShare:t})}else this.setData({show:e,showShare:e})},updatePreviewStatus:function(e){var t=this,i=!!Object.is(e,!0);this.setData({showPreview:i},function(){return t.selectComponent("#preview").updatePreviewStatus(e)})},onStatusChange:function(e){var t=e.detail.status||!1;this.setData({show:!1,showShare:!1,hideShare:t})},generatePoster:function(){var e=this;this.setData({hideShare:!0},function(){return e.selectComponent("#preview").getSaveAuth(3)})},share:function(){this.count(14),this.setData({show:!1,showShare:!1})},count:function(e){var t=wx.getStorageSync(_index.storageKeys.id),i=t.app_id,a=t.user_id;(0,_index2.count)({type:e,app_id:i,user_id:a})},reportFormID:function(e){var t=e.detail,i=t.formId,a=t.target.dataset.action;(0,_index2.reportFormID)({form_id:i,type:a})}}});